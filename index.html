<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0">
    <title>Яндекс.Дом</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>

<header class="h">
    <a href="/" class="h__lo" aria-label="Яндекс.Дом"></a>
    <button class="h__m" aria-expanded="false">
        <span class="h__m-t a11">Открыть меню</span>
    </button>
    <ul class="h__ls">
        <li class="h__i">
            <a class="h__lk h__lk_c" href="/" aria-current="page">Сводка</a>
        </li>
        <li class="h__i">
            <a class="h__lk" href="/devices">Устройства</a>
        </li>
        <li class="h__i">
            <a class="h__lk" href="/scripts">Сценарии</a>
        </li>
    </ul>
</header>

<main class="m">
    <section class="section m__general">
        <h2 class="section__title section__title-header section__main-title">Главное</h2>
        <div class="hero-dashboard">
            <div class="hero-dashboard__primary">
                <h3 class="hero-dashboard__title">Привет, Геннадий!</h3>
                <p class="hero-dashboard__subtitle">Двери и окна закрыты, сигнализация включена.</p>
                <ul class="hero-dashboard__info">
                    <li class="hero-dashboard__item">
                        <div class="hero-dashboard__item-title">Дома</div>
                        <div class="hero-dashboard__item-details">
                            +23
                            <span class="a11">°</span>
                        </div>
                    </li>
                    <li class="hero-dashboard__item">
                        <div class="hero-dashboard__item-title">За окном</div>
                        <div class="hero-dashboard__item-details">
                            +19
                            <span class="a11">°</span>

                            <div
                                class="hero-dashboard__icon hero-dashboard__icon_rain"
                                role="img"
                                aria-label="Дождь"
                            ></div>
                        </div>
                    </li>
                </ul>
            </div>
            <ul class="hero-dashboard__schedule">
                <li class="event">
                    <button class="event__button">
                        <span class="event__icon event__icon_temp" role="img" aria-label="Температура"></span>
                        <h4 class="event__title">Philips Cooler</h4>
                        <span class="event__subtitle">Начнет охлаждать в 16:30</span>
                    </button>
                </li>
                <li class="event">
                    <button class="event__button">
                        <span class="event__icon event__icon_light" role="img" aria-label="Освещение"></span>
                        <h4 class="event__title">Xiaomi Yeelight LED Smart Bulb</h4>
                        <span class="event__subtitle">Включится в 17:00</span>
                    </button>
                </li>
                <li class="event">
                    <button class="event__button">
                        <span class="event__icon event__icon_light" role="img" aria-label="Освещение"></span>
                        <h4 class="event__title">Xiaomi Yeelight LED Smart Bulb</h4>
                        <span class="event__subtitle">Включится в 17:00</span>
                    </button>
                </li>
            </ul>
        </div>
    </section>

    <section class="section m__scripts">
        <h2 class="section__title section__title-header">Избранные сценарии</h2>

        <ul class="event-grid">
            <li class="event event_slim">
                <button class="event__button">
                    <span class="event__icon event__icon_light2" role="img" aria-label="Освещение"></span>
                    <h4 class="event__title">Выключить весь свет в доме и во дворе</h4>
                </button>
            </li>
            <li class="event event_slim">
                <button class="event__button">
                    <span class="event__icon event__icon_schedule" role="img" aria-label="Расписание"></span>
                    <h4 class="event__title">Я ухожу</h4>
                </button>
            </li>
            <li class="event event_slim">
                <button class="event__button">
                    <span class="event__icon event__icon_light2" role="img" aria-label="Освещение"></span>
                    <h4 class="event__title">Включить свет в коридоре</h4>
                </button>
            </li>
            <li class="event event_slim">
                <button class="event__button">
                    <span class="event__icon event__icon_temp2" role="img" aria-label="Температура"></span>
                    <h4 class="event__title">Набрать горячую ванну</h4>
                    <span class="event__subtitle">Начнётся в 18:00</span>
                </button>
            </li>
            <li class="event event_slim">
                <button class="event__button">
                    <span class="event__icon event__icon_temp2" role="img" aria-label="Температура"></span>
                    <h4 class="event__title">Сделать пол тёплым во всей квартире</h4>
                </button>
            </li>
        </ul>
    </section>

    <section class="section m__devices">
        <div class="section__title">
            <h2 class="section__title-header">
                Избранные устройства
            </h2>

            <select class="section__select">
                <option value="all" selected>Все</option>
                <option value="kitchen">Кухня</option>
                <option value="hall">Зал</option>
                <option value="lights">Лампочки</option>
                <option value="cameras">Камеры</option>
            </select>

            <ul role="tablist" class="section__tabs">
                <li role="tab" aria-selected="true" tabindex="0" class="section__tab section__tab_active" id="tab_all" aria-controls="panel_all" data-id="all">Все</li>
                <li role="tab" aria-selected="false" class="section__tab" id="tab_kitchen" aria-controls="panel_kitchen" data-id="kitchen">Кухня</li>
                <li role="tab" aria-selected="false" class="section__tab" id="tab_hall" aria-controls="panel_hall" data-id="hall">Зал</li>
                <li role="tab" aria-selected="false" class="section__tab" id="tab_lights" aria-controls="panel_lights" data-id="lights">Лампочки</li>
                <li role="tab" aria-selected="false" class="section__tab" id="tab_cameras" aria-controls="panel_cameras" data-id="cameras">Камеры</li>
            </ul>
        </div>

        <div role="tabpanel" class="section__panel" aria-hidden="false" id="panel_all" aria-labelledby="tab_all" data-id="all">
            <ul class="section__panel-list">
                <li class="event">
                    <button class="event__button">
                        <span class="event__icon event__icon_light2" role="img" aria-label="Освещение"></span>
                        <h4 class="event__title">Xiaomi Yeelight LED Smart Bulb</h4>
                        <span class="event__subtitle">Включено</span>
                    </button>
                </li>
                <li class="event">
                    <button class="event__button">
                        <span class="event__icon event__icon_light" role="img" aria-label="Освещение"></span>
                        <h4 class="event__title">D-Link Omna 180 Cam</h4>
                        <span class="event__subtitle">Включится в 17:00</span>
                    </button>
                </li>
                <li class="event">
                    <button class="event__button">
                        <span class="event__icon event__icon_temp" role="img" aria-label="Температура"></span>
                        <h4 class="event__title">Elgato Eve Degree Connected</h4>
                        <span class="event__subtitle">Выключено до 17:00</span>
                    </button>
                </li>
                <li class="event">
                    <button class="event__button">
                        <span class="event__icon event__icon_light" role="img" aria-label="Освещение"></span>
                        <h4 class="event__title">LIFX Mini Day & Dusk A60 E27</h4>
                        <span class="event__subtitle">Включится в 17:00</span>
                    </button>
                </li>
                <li class="event">
                    <button class="event__button">
                        <span class="event__icon event__icon_light2" role="img" aria-label="Освещение"></span>
                        <h4 class="event__title">Xiaomi Mi Air Purifier 2S</h4>
                        <span class="event__subtitle">Включено</span>
                    </button>
                </li>
                <li class="event">
                    <button class="event__button">
                        <span class="event__icon event__icon_light" role="img" aria-label="Освещение"></span>
                        <h4 class="event__title">Philips Zhirui</h4>
                        <span class="event__subtitle">Выключено</span>
                    </button>
                </li>
                <li class="event">
                    <button class="event__button">
                        <span class="event__icon event__icon_light2" role="img" aria-label="Освещение"></span>
                        <h4 class="event__title">Xiaomi Mi Air Purifier 2S</h4>
                        <span class="event__subtitle">Включено</span>
                    </button>
                </li>
            </ul>
        </div>

        <div role="tabpanel" class="section__panel section__panel_hidden" aria-hidden="true" id="panel_kitchen" aria-labelledby="tab_kitchen" data-id="kitchen">
            <ul class="section__panel-list">
                <li class="event">
                    <button class="event__button">
                        <span class="event__icon event__icon_light2" role="img" aria-label="Освещение"></span>
                        <h4 class="event__title">Xiaomi Yeelight LED Smart Bulb</h4>
                        <span class="event__subtitle">Включено</span>
                    </button>
                </li>
                <li class="event">
                    <button class="event__button">
                        <span class="event__icon event__icon_temp" role="img" aria-label="Температура"></span>
                        <h4 class="event__title">Elgato Eve Degree Connected</h4>
                        <span class="event__subtitle">Выключено до 17:00</span>
                    </button>
                </li>
            </ul>
        </div>

        <div role="tabpanel" class="section__panel section__panel_hidden" aria-hidden="true" id="panel_hall" aria-labelledby="tab_hall" data-id="hall">
            <ul class="section__panel-list">
                <li class="event">
                    <button class="event__button">
                        <span class="event__icon event__icon_light" role="img" aria-label="Освещение"></span>
                        <h4 class="event__title">Philips Zhirui</h4>
                        <span class="event__subtitle">Выключено</span>
                    </button>
                </li>
                <li class="event">
                    <button class="event__button">
                        <span class="event__icon event__icon_light2" role="img" aria-label="Освещение"></span>
                        <h4 class="event__title">Xiaomi Mi Air Purifier 2S</h4>
                        <span class="event__subtitle">Включено</span>
                    </button>
                </li>
            </ul>
        </div>

        <div role="tabpanel" class="section__panel section__panel_hidden" aria-hidden="true" id="panel_lights" aria-labelledby="tab_lights" data-id="lights">
            <ul class="section__panel-list">
                <li class="event">
                    <button class="event__button">
                        <span class="event__icon event__icon_light" role="img" aria-label="Освещение"></span>
                        <h4 class="event__title">D-Link Omna 180 Cam</h4>
                        <span class="event__subtitle">Включится в 17:00</span>
                    </button>
                </li>
                <li class="event">
                    <button class="event__button">
                        <span class="event__icon event__icon_light" role="img" aria-label="Освещение"></span>
                        <h4 class="event__title">LIFX Mini Day & Dusk A60 E27</h4>
                        <span class="event__subtitle">Включится в 17:00</span>
                    </button>
                </li>
                <li class="event">
                    <button class="event__button">
                        <span class="event__icon event__icon_light2" role="img" aria-label="Освещение"></span>
                        <h4 class="event__title">Xiaomi Mi Air Purifier 2S</h4>
                        <span class="event__subtitle">Включено</span>
                    </button>
                </li>
                <li class="event">
                    <button class="event__button">
                        <span class="event__icon event__icon_light" role="img" aria-label="Освещение"></span>
                        <h4 class="event__title">Philips Zhirui</h4>
                        <span class="event__subtitle">Выключено</span>
                    </button>
                </li>
            </ul>
        </div>

        <div role="tabpanel" class="section__panel section__panel_hidden" aria-hidden="true" id="panel_cameras" aria-labelledby="tab_cameras" data-id="cameras">
            <ul class="section__panel-list">
                <li class="event">
                    <button class="event__button">
                        <span class="event__icon event__icon_light2" role="img" aria-label="Освещение"></span>
                        <h4 class="event__title">Xiaomi Mi Air Purifier 2S</h4>
                        <span class="event__subtitle">Включено</span>
                    </button>
                </li>
            </ul>
        </div>
    </section>
</main>

<footer class="footer">
    <ul class="footer__list">
        <li class="footer__item">
            <a class="footer__link" href="/">Помощь</a>
        </li>
        <li class="footer__item">
            <a class="footer__link" href="/">Обратная связь</a>
        </li>
        <li class="footer__item">
            <a class="footer__link" href="/">Разработчикам</a>
        </li>
        <li class="footer__item">
            <a class="footer__link" href="/">Условия использования</a>
        </li>
    </ul>

    <div class="footer__copyright">
        © 1997–2022 ООО «Яндекс»
    </div>
</footer>
<script>
    (() => {
    function bind(nodes, event, handler) {
        Array.from(nodes).forEach(node => {
            node.addEventListener(event, handler);
        });
    }

    function makeTabs(node) {
        let selected = node.querySelector('.section__tab_active').dataset.id;
        const tabs = node.querySelectorAll('.section__tab');
        const list = Array.from(tabs).map(node => node.dataset.id);
        const select = node.querySelector('.section__select');

        function selectTab(newId) {
            const newTab = node.querySelector(`.section__tab[data-id=${newId}]`);
            const newPanel = node.querySelector(`.section__panel[data-id=${newId}]`);
            const oldTab = node.querySelector('.section__tab_active');
            const oldPanel = node.querySelector('.section__panel:not(.section__panel_hidden)');

            selected = newId;

            oldTab.classList.remove('section__tab_active');
            oldTab.setAttribute('aria-selected', 'false');
            oldTab.removeAttribute('tabindex');
            newTab.classList.add('section__tab_active');
            newTab.setAttribute('aria-selected', 'true');
            newTab.setAttribute('tabindex', '0');
            newTab.focus({
                preventScroll: true
            });

            oldPanel.classList.add('section__panel_hidden');
            oldPanel.setAttribute('aria-hidden', 'true');
            newPanel.classList.remove('section__panel_hidden');
            newPanel.setAttribute('aria-hidden', 'false');

            select.value = newId;
        }

        select.addEventListener('input', () => {
            selectTab(select.value);
        });

        bind(tabs, 'click', event => {
            const newId = event.target.dataset.id;
            selectTab(newId);
        });

        bind(tabs, 'keydown', event => {
            if (event.ctrlKey || event.metaKey || event.shiftKey || event.altKey) {
                return;
            }

            let index = list.indexOf(selected);
            if (event.which === 37) {
                // left
                --index;
            } else if (event.which === 39) {
                // right
                ++index;
            } else if (event.which === 36) {
                // home
                index = 0;
            } else if (event.which === 35) {
                // end
                index = list.length - 1;
            } else {
                return;
            }

            if (index >= list.length) {
                index = 0;
            } else if (index < 0) {
                index = list.length - 1;
            }

            selectTab(list[index]);
            event.preventDefault();
        });
    }

    function makeMenu(node) {
        let expanded = false;
        const links = document.querySelector('.h__ls');

        node.addEventListener('click', () => {
            expanded = !expanded;
            node.setAttribute('aria-expanded', expanded ? 'true' : 'false');
            node.querySelector('.h__m-t').textContent = expanded ? 'Закрыть меню' : 'Открыть меню';
            links.classList.toggle('h__ls_opened', expanded);
            links.classList.add('h__ls-t');
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
        Array.from(document.querySelectorAll('.m__devices')).forEach(makeTabs);
        Array.from(document.querySelectorAll('.h__m')).forEach(makeMenu);
    });
})();

</script>
</body>
</html>
